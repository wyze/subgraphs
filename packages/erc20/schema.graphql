type Transfer @entity(immutable: true) {
  id: Bytes!

  "Amount converted to a decimal"
  amount: BigDecimal!

  from: User!
  to: User!
}

type User @entity {
  id: Bytes!

  "Running user balance"
  balance: BigDecimal!

  received: BigDecimal!
  receivedCount: Int!

  sent: BigDecimal!
  sentCount: Int!

  daily: [UserDaily!]! @derivedFrom(field: "user")
  transfersIn: [Transfer!]! @derivedFrom(field: "to")
  transfersOut: [Transfer!]! @derivedFrom(field: "from")
}

type UserDaily @entity {
  id: Bytes!

  date: Int!
  user: User!

  balance: BigDecimal!

  received: BigDecimal!
  receivedCount: Int!

  sent: BigDecimal!
  sentCount: Int!
}
